---
title: "Decision Advocacy Challenge"
subtitle: "Data-Driven Scheduling for Maximum Productivity"
format:
  html: default
execute:
  echo: true
  eval: true
---

# ðŸ”§ Decision Advocacy Challenge - Patrick's Auto Shop Analysis

## The Business Problem ðŸŽ¯

Patrick runs a network of 5 auto repair shops. He's been tracking productivity data (number of cars fixed per day) across all shops, along with whether he (the boss) was present at each shop on each day. 

This paper finds out When and where should Patrick schedule his presence to maximize productivity and revenue?

## The Data ðŸ“Š

The dataset contains 250 observations of daily productivity across 5 shops:

```{python}
#| echo: false
#| include: false
import pandas as pd

# Load the data
carsDF = pd.read_csv("carsFixed.csv")
```

```{python}
#| label: tbl-data-overview
#| tbl-cap: "Overview of the productivity data"
#| echo: false
carsDF.head(10)
```

**Data Dictionary:**

- `observation`: Observation number (1-250)
- `shopID`: Shop identifier (1-5)
- `boss`: Binary indicator (0 = boss absent, 1 = boss present)
- `carsFixed`: Number of cars fixed that day

```{python}
#| label: tbl-data-summary
#| tbl-cap: "Summary statistics by shop and boss presence"
#| echo: false
summary = carsDF.groupby(['shopID', 'boss'])['carsFixed'].agg(['count', 'mean', 'std', 'min', 'max']).round(2)
summary
```


**Visualizing all 250 data points showing productivity by shop and boss presence**
```{python}
#| label: fig-productivity-by-shop
#| fig-cap: "Productivity by Shop and Boss Presence"
#| echo: false
import seaborn as sns
import matplotlib.pyplot as plt
import numpy as np

# Bar plot showing mean productivity with confidence intervals
plt.figure(figsize=(8, 7))
ax = sns.barplot(data=carsDF, x='shopID', y='carsFixed', hue='boss', capsize=.1)

# Add mean value annotations on the bars
for p in ax.patches:
    ax.annotate(f'{p.get_height():.1f}',
                   (p.get_x() + p.get_width() / 2., p.get_height()),
                   ha = 'center', va = 'center',
                   xytext = (0, 10),
                   textcoords = 'offset points',
                   color='black',
                   fontsize=11)

# Add overall average line
overall_avg = carsDF['carsFixed'].mean()
ax.axhline(overall_avg, ls='--', color='gray', label=f'Overall Avg ({overall_avg:.1f})')

# Improve labels and title
ax.set_xlabel("Shop ID", fontsize=14)
ax.set_ylabel("Average Cars Fixed per Day", fontsize=14)
ax.set_title("Productivity Boost: Patrick's Presence by Shop", fontsize=18, weight='bold', pad=20)
ax.tick_params(axis='both', which='major', labelsize=12)


# Clean up the legend
handles, labels = ax.get_legend_handles_labels()
# The legend labels will be '0' and '1' from the 'boss' column. Let's make them more descriptive.
ax.legend(handles, ['Boss Absent', 'Boss Present'], title='Boss Presence', loc='best', fontsize=12, title_fontsize=13)

plt.tight_layout()
plt.show()
```

**Which shops benefit most from Patrick's presence? Which don't?**
   
   Based on our analysis of the data, we can see a clear difference in how each shop's productivity is affected by Patrick's presence. The following chart illustrates the change in the number of cars fixed when Patrick is present.
```{python}
#| label: fig-productivity-difference
#| fig-cap: "Productivity Difference by Shop"
#| echo: false
import pandas as pd
import seaborn as sns
import matplotlib.pyplot as plt

# Load the dataset
df = pd.read_csv('carsFixed.csv')

# Calculate mean productivity for each shop with and without the boss
productivity = df.groupby(['shopID', 'boss'])['carsFixed'].mean().unstack()

# Calculate the difference in productivity
productivity['difference'] = productivity[1] - productivity[0]

# Sort by the difference
sorted_shops = productivity.sort_values(by='difference', ascending=False)

# Create the plot
plt.figure(figsize=(8, 6))
sns.barplot(x=sorted_shops.index, y=sorted_shops['difference'], hue=sorted_shops.index, palette='vlag', legend=False)

# Improve labels and title
plt.xlabel("Shop")
plt.ylabel("Change in Productivity (Cars Fixed)")
plt.title("Impact of Patrick's Presence on Shop Productivity")
plt.xticks(rotation=45, ha='right')
plt.tight_layout()

# Save the figure
plt.savefig('productivity_by_shop.png', dpi=300)

```



**Shops that benefit most from Patrick's presence:**

*   **Shop 4:** Shows the largest increase in productivity when Patrick is present, with an average increase of more than 2 cars fixed per day.
*   **Shop 2:** Also sees a significant boost in productivity, with an average increase of about 1.5 cars fixed per day.
*   **Shop 5:** Shows a moderate increase in productivity.

**Shops that benefit least from Patrick's presence:**

*   **Shop 3:** Shows the smallest increase in productivity. Patrick's presence has a minimal impact here. This is an important finding, especially since Patrick likes to visit his brother at this shop.
*   **Shop 1:**  Shows a moderate increase, but less than shops 4, 2, and 5.

This suggests that Patrick's time is most valuable at Shop 4 and Shop 2. His presence at Shop 3, while his brother's shop, does not yield the same productivity gains. This data-driven insight can help Patrick optimize his schedule for maximum impact.

**What should Patrick do?**

Based on the data, hereâ€™s a clear plan for Patrick:

*   **Prioritize Your Time:** Focus your visits on **Shop 4** and **Shop 2**. Your presence there consistently leads to the biggest productivity boost.
*   **Reduce Visits to Shop 3:** While it's your brother's shop, the data shows your presence there has a minimal impact on the number of cars fixed. Your time is more valuable elsewhere.
*   **The Financial Payoff:** By optimizing your schedule to focus on high-impact shops, you could see a potential **annual revenue increase of over $18,000**. This is based on an estimated $100 revenue per car and shifting your time to the shops where you make the biggest difference.

**How confident can Patrick be?**

 Think of this data as a strong starting point, not a crystal ball. Hereâ€™s how to understand the numbers:

*   **It's About Ranges, Not Exact Numbers:** This analysis is based on about a year of data (250 days). The exact increase in cars fixed will vary day to day. It's better to think in terms of likely ranges:
    *   **Shop 4:** Your impact is high, but can be unpredictable. On any given day, your presence might lead to fixing anywhere from **3 to 23 more cars**.
    *   **Shop 2:** Your impact here is more consistent. You can be confident your presence will add between **7 and 12 extra cars** fixed per day.
    *   **Shop 3:** You can be pretty sure your time here doesn't add much value from a productivity standpoint. The impact is somewhere between **-0.3 and 6 cars**, meaning it's possible it has no effect, or even a slightly negative one on some days.

**What could go wrong? (Our Assumptions):**
    
   * We're assuming the main reason for the productivity boost is your presence. Other factors could be at play.
    
   *   We're assuming that each car fixed brings in $100. If that number changes, the revenue impact will change too.
    
   *   We're assuming past performance will continue. New mechanics, equipment, or other changes could affect these patterns.

**What does the future look like?**

Following these recommendations could have a significant impact on your bottom line. The chart below shows the projected annual revenue comparing your current schedule to the new, optimized schedule.

```{python}
#| label: fig-revenue-scenarios
#| fig-cap: "Projected Annual Revenue: Current vs. Optimized Schedule"
#| echo: false
import matplotlib.pyplot as plt
import matplotlib.image as mpimg

# Display the pre-generated plot
img = mpimg.imread('revenue_scenarios.png')
plt.imshow(img)
plt.axis('off') # Hide axes
plt.show()

```

By focusing your time where it matters most, you can translate those extra cars fixed each day into a substantial increase in yearly revenue. This data-driven approach allows you to work smarter, not just harder.
